{"version":3,"sources":["services/api.js","components/MovieList.js","pages/HomePage/HomePage.js","components/Search.js","pages/MoviesPage/MoviesPage.js","components/Article.js","pages/Cast/Cast.js","pages/Reviews/Reviews.js","components/NavDetails.js","pages/MovieDetailsPage/MovieDetailsPage.js","pages/NotFoundPage/NotFoundPage.js","components/Nav.js","App.js","index.js"],"names":["key","searchMovies","query","axios","get","MovieList","films","map","item","id","to","title","HomePage","state","mediaType","timeWindow","Api","then","response","setState","data","results","this","Component","Search","value","handleChange","e","target","handleSubmit","preventDefault","onSubmit","props","onChange","type","MoviePage","movies","fetchFilms","q","API","res","onSearchSubmit","history","location","push","search","currentSearch","URLSearchParams","prevProps","prevSearch","el","Article","onGoBack","Date","release_date","getFullYear","popularity","src","poster_path","alt","overview","genres","name","onClick","Cast","cast","match","params","resData","profile_path","character","Reviews","reviews","length","author","content","NavDetails","url","MovieDetailsPage","movie","handleGoBack","path","component","NotFoundPage","activeStyle","color","Nav","exact","App","MoviesPage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.48728153.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst key = '2df95ba3f4df395febb74bf2085caed3';\n\nexport const fetchPopularMovies = (\n  mediaType = 'movie',\n  timeWindow = 'week',\n) => {\n  return axios.get(\n    `https://api.themoviedb.org/3/trending/${mediaType}/${timeWindow}?api_key=${key}`,\n  );\n};\n\nexport const fetchMoviesWithId = id => {\n  return axios.get(`https://api.themoviedb.org/3/movie/${id}?api_key=${key}`);\n};\n\nexport const fetchCast = id => {\n  return axios.get(\n    `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${key}`,\n  );\n};\n\nexport const fetchReviews = id => {\n  return axios.get(\n    `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${key}`,\n  );\n};\n\nexport const searchMovies = (query = 'superman') => {\n  return axios.get(\n    `https://api.themoviedb.org/3/search/movie?query=${query}&api_key=${key}`,\n  );\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nconst MovieList = ({ films = [] }) => {\n  return (\n    <ul>\n      {films.map(item => (\n        <li key={item.id}>\n          <Link to={`/movies/${item.id}`}>{item.title}</Link>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nMovieList.propTypes = {\n  films: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nexport default MovieList;\n","import React, { Component } from 'react';\n\nimport * as Api from '../../services/api';\n// import MoviesPage from '../MoviesPage/MoviesPage';\nimport MovieList from '../../components/MovieList';\n\nclass HomePage extends Component {\n  state = {\n    films: [],\n  };\n\n  componentDidMount() {\n    Api.fetchPopularMovies().then(response => {\n      this.setState({ films: response.data.results });\n    });\n  }\n\n  render() {\n    const { films } = this.state;\n    return (\n      <div>\n        <h1>The Weekly Trends</h1>\n        <MovieList films={films} />\n      </div>\n    );\n  }\n}\n\nexport default HomePage;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Search extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    value: '',\n  };\n\n  handleChange = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { onSubmit } = this.props;\n    const { value } = this.state;\n    onSubmit(value);\n    this.setState({ value: '' });\n    // console.log(onSubmit);\n  };\n\n  render() {\n    const { value } = this.state;\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input value={value} onChange={this.handleChange} type=\"text\" />\n        <button type=\"submit\">Search</button>\n      </form>\n    );\n  }\n}\n\nexport default Search;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport * as API from '../../services/api';\nimport Search from '../../components/Search';\n\nclass MoviePage extends Component {\n  static propTypes = {\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n    }).isRequired,\n    location: PropTypes.shape({\n      search: PropTypes.string.isRequired,\n    }).isRequired,\n  };\n\n  state = {\n    movies: [],\n  };\n\n  componentDidMount() {\n    const { location } = this.props;\n\n    const currentSearch = new URLSearchParams(location.search).get('search');\n\n    if (!currentSearch) {\n      return;\n    }\n\n    this.fetchFilms(currentSearch);\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevSearch = new URLSearchParams(prevProps.location.search).get(\n      'search',\n    );\n    const { location } = this.props;\n    const currentSearch = new URLSearchParams(location.search).get('search');\n\n    if (prevSearch === currentSearch) {\n      return;\n    }\n\n    this.fetchFilms(currentSearch);\n  }\n\n  fetchFilms = q => {\n    API.searchMovies(q).then(res =>\n      this.setState({ movies: res.data.results }),\n    );\n  };\n\n  onSearchSubmit = query => {\n    const { history, location } = this.props;\n    // eslint-disable-next-line react/prop-types\n    history.push({\n      ...location,\n      search: `?search=${query}`,\n    });\n  };\n\n  render() {\n    const { movies } = this.state;\n    return (\n      <div>\n        <Search onSubmit={this.onSearchSubmit} />\n        <ul>\n          {movies.map(el => (\n            <li key={el.id}>\n              <Link to={`/show/${el.id}`}>{el.title}</Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default MoviePage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Article = ({ data, onGoBack }) => {\n  return (\n    <article>\n      <h2>{`${data.title}(${new Date(data.release_date).getFullYear()})`}</h2>\n      <p>User Score: {data.popularity}%</p>\n      <img\n        src={`https://image.tmdb.org/t/p/w500/${data.poster_path}`}\n        alt={data.title}\n      />\n      <h3>Overview</h3>\n      <p>{data.overview}</p>\n      <h4>Genres</h4>\n      {data.genres.map(item => (\n        <p key={item.id}>{item.name}</p>\n      ))}\n      <button onClick={onGoBack} type=\"button\">\n        Back\n      </button>\n    </article>\n  );\n};\nArticle.propTypes = {\n  onGoBack: PropTypes.func.isRequired,\n  data: PropTypes.shape({\n    title: PropTypes.string,\n    popularity: PropTypes.number,\n    poster_path: PropTypes.string,\n    release_date: PropTypes.string,\n    overview: PropTypes.string,\n    genres: PropTypes.arrayOf(PropTypes.shape()),\n  }).isRequired,\n};\n\nexport default Article;\n","import React, { Component } from 'react';\nimport * as Api from '../../services/api';\n\nconst getIdFromProps = props => props.match.params.id;\n\nclass Cast extends Component {\n  state = {\n    cast: [],\n  };\n\n  componentDidMount() {\n    const id = getIdFromProps(this.props);\n\n    Api.fetchCast(id).then(resData =>\n      this.setState({ cast: resData.data.cast }),\n    );\n  }\n\n  render() {\n    const { cast } = this.state;\n    // console.log(cast);\n    return (\n      <div>\n        <ul>\n          {cast.map(item => (\n            <li key={item.id}>\n              <img\n                src={`https://image.tmdb.org/t/p/w500/${item.profile_path}`}\n                alt={item.name}\n              />\n              <p>{item.name}</p>\n              <p>{item.character}</p>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Cast;\n","import React, { Component } from 'react';\nimport * as Api from '../../services/api';\n\nconst getIdFromProps = props => props.match.params.id;\n\nclass Reviews extends Component {\n  state = {\n    reviews: [],\n  };\n\n  componentDidMount() {\n    const id = getIdFromProps(this.props);\n\n    Api.fetchReviews(id).then(resData => {\n      this.setState({ reviews: resData.data.results });\n    });\n  }\n\n  render() {\n    const { reviews } = this.state;\n    // console.log(cast);\n    return (\n      <div>\n        {reviews.length > 0 ? (\n          <ul>\n            {reviews.map(item => (\n              <li key={item.id}>\n                <p>Author: {item.author}</p>\n                <p>{item.content}</p>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div>not found</div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Reviews;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nconst NavDetails = ({ url }) => {\n  return (\n    <div>\n      <ul>\n        <li>\n          <Link to={`${url}/cast`}>Cast</Link>\n        </li>\n        <li>\n          <Link to={`${url}/reviews`}>Reviews</Link>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nNavDetails.propTypes = {\n  url: PropTypes.string.isRequired,\n};\nexport default NavDetails;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router-dom';\nimport * as Api from '../../services/api';\nimport Article from '../../components/Article';\nimport Cast from '../Cast/Cast';\nimport Reviews from '../Reviews/Reviews';\nimport NavDetails from '../../components/NavDetails';\n\nconst getIdFromProps = props => props.match.params.id;\n\nclass MovieDetailsPage extends Component {\n  state = {\n    movie: null,\n  };\n\n  static propTypes = {\n    history: PropTypes.shape().isRequired,\n    match: PropTypes.shape({ url: PropTypes.string }).isRequired,\n  };\n\n  componentDidMount() {\n    const id = getIdFromProps(this.props);\n\n    Api.fetchMoviesWithId(id).then(movie => this.setState({ movie }));\n  }\n\n  handleGoBack = () => {\n    this.props.history.push('/');\n  };\n\n  render() {\n    const { movie } = this.state;\n    const { match } = this.props;\n\n    return (\n      <div>\n        {movie && <Article data={movie.data} onGoBack={this.handleGoBack} />}\n        <NavDetails url={match.url} />\n        <Switch>\n          <Route path=\"/movies/:id/cast\" component={Cast} />\n          <Route path=\"/movies/:id/reviews\" component={Reviews} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default MovieDetailsPage;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst NotFoundPage = () => {\n  return (\n    <div>\n      <h2>Такая страница не найдена</h2>\n      <p>\n        Вернуться на домашнюю страницу: <NavLink to=\"/\"> HOME </NavLink>\n      </p>\n    </div>\n  );\n};\n\nexport default NotFoundPage;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst activeStyle = {\n  color: 'pink',\n};\n\nconst Nav = () => {\n  return (\n    <div>\n      <ul>\n        <li>\n          <NavLink to=\"/\" exact activeStyle={activeStyle}>\n            Home\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/movies\" activeStyle={activeStyle}>\n            Movies\n          </NavLink>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Nav;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport HomePage from './pages/HomePage/HomePage';\nimport MoviesPage from './pages/MoviesPage/MoviesPage';\nimport MovieDetailsPage from './pages/MovieDetailsPage/MovieDetailsPage';\nimport NotFoundPage from './pages/NotFoundPage/NotFoundPage';\nimport Nav from './components/Nav';\n\nconst App = () => (\n  <div>\n    <Nav />\n    <Switch>\n      <Route path=\"/\" exact component={HomePage} />\n      <Route path=\"/movies/:id\" component={MovieDetailsPage} />\n      <Route path=\"/movies\" component={MoviesPage} />\n\n      {/* <Route path=\"/movies/:movieId/cast\" component={Cast} />\n          <Route path=\"/movies/:movieId/reviews\" component={Reviews} /> */}\n      <Route component={NotFoundPage} />\n    </Switch>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Route } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <Route>\n      <App />\n    </Route>\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}